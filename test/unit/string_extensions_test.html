<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Nakatype Unit test file :: String Extensions</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <script src="../vendor/prototype.js" type="text/javascript"></script>
  <script src="../lib/unittest.js" type="text/javascript"></script>
  <script src="../../src/string_extensions.js" type="text/javascript" charset="utf-8"></script>
  <link rel="stylesheet" href="../test.css" type="text/css" />
</head>
<body>
<h1>String Extensions Unit test file</h1>
<p>Test of functions in string_extensions.js</p>

<!-- Log output -->
<div id="testlog"> </div>

<!-- Tests follow -->
<script type="text/javascript" language="javascript" charset="utf-8">

// <![CDATA[
new Test.Unit.Runner({
  
  testShouldConvertToPermalink:  function() {
    var correctResult = 'why-i-won-t-eat-lettuce';
    var sentence = "Why I Won't Eat Lettuce";
    var underscored = "Why_I_Won't_Eat_Lettuce";
    this.assertEqual(correctResult, sentence.toPermalink());
    this.assertEqual(correctResult, underscored.toPermalink());
  },

  testShouldConvertToMethodName: function() {
    var methodName = 'eatSomePizza';
    var withSpaces = 'eat some pizza';
    var withUnderscores = 'eat_some_pizza';
    var withDashes = 'eat-some-pizza';
    var withAllCaps = 'EAT SOME PIZZA';
    var withCamelCase = 'EatSomepizza';
    this.assertEqual(methodName, withSpaces.toMethodName());
    this.assertEqual(methodName, withUnderscores.toMethodName());
    this.assertEqual(methodName, withDashes.toMethodName());
    this.assertEqual(methodName, withAllCaps.toMethodName());
    this.assertEqual(methodName, withCamelCase.toMethodName()); // TODO Fix this failure
  },
  
  testShouldTitleize: function() {
    var correctResult = 'Hello, My Name Is Pat';
    var allLower = 'hello, my name is pat';
    this.assertEqual(correctResult, allLower.titleize());
  },
  
  testShouldUncapitalize: function() {
    var correctResult = 'hELLO';
    var allCaps = 'HELLO';
    this.assertEqual(correctResult, allCaps.uncapitalize());
  },
  
  testShouldReturnStringWithoutSubstring: function() {
    var correctResult = 'I wish I had autotest';
    var badString = "I don't wish I had autotest";
    this.assertEqual(correctResult, badString.without(" don't"));
  },
  
  testShouldReturnStringWithoutRegex: function() {
    var correctResult = 'I wish I had autotest';
    var badString = "I don't wish I had autotest";
    this.assertEqual(correctResult, badString.without(/\s?don\'t/));
  },
  
  testShouldPluralize: function() {
    this.assertEqual('users', 'user'.pluralize(2));
    this.assertEqual('users', 'user'.pluralize(0));
    this.assertEqual('user', 'user'.pluralize(1));
    this.assertEqual('person', 'person'.pluralize(1, 'people'));
    this.assertEqual('people', 'person'.pluralize(2, 'people'));
  }
});
  
// ]]>
</script>
</body>
</html>